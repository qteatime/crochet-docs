<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Traits" href="traits.html" /><link rel="prev" title="Using typed data" href="using.html" />

    <meta name="generator" content="sphinx-4.1.1, furo 2021.07.05.beta38"/>
        <title>Hierarchies of types - Crochet 0.12 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/crochet.css" />
    


<style>
  :root {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../_static/pygments_dark.css"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Crochet 0.12 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">Crochet 0.12 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">The Crochet System</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../whats-crochet.html">What’s Crochet?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing-crochet.html">Installing Crochet</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../structure/index.html">How is Crochet structured?</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../structure/introduction.html">The Crochet universe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../structure/package-configuration.html">Package configuration</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Data and types</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="types-and-data.html">Types and data modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="using.html">Using typed data</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Hierarchies of types</a></li>
<li class="toctree-l3"><a class="reference internal" href="traits.html">Traits</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../commands/index.html">Commands</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../commands/declaration.html">What are commands?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/signatures.html">Signatures and their uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/dispatch.html">Executing commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/why.html">Why are commands …?</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../computing/index.html">Computing with Crochet</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../computing/execution-models.html">Execution models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../computing/bindings.html">Naming values</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../computing/intrinsics/index.html">Intrinsic data types</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/gradual.html">Gradual representations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/numbers.html">Numeric models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/text.html">Textual models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/logic.html">Logical models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../design-philosophy.html">Annex A: Design philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sociology-and-linguistics.html">Annex B: Sociology and linguistics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="hierarchies-of-types">
<h1>Hierarchies of types<a class="headerlink" href="#hierarchies-of-types" title="Permalink to this headline">¶</a></h1>
<p>Types in Crochet are organised into a hierarchy. This hierarchy
is described by the way types are defined.</p>
<p>For example:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> being<span class="p">;</span>

<span class="k">type</span> person <span class="k">is</span> being<span class="p">;</span>
<span class="k">type</span> alissa <span class="k">is</span> person<span class="p">;</span>

<span class="k">type</span> cat <span class="k">is</span> being<span class="p">;</span>
<span class="k">type</span> caramel <span class="k">is</span> cat<span class="p">;</span>
</pre></div>
</div>
<p>These types describes a taxonomy—a classification of different
kinds of things into a hierarchy. From this classification we
know that caramel is a cat. But also, transitively, caramel is
a being—because all cats are also beings. Likewise, alissa
is a person and also a being.</p>
<p>All of them are also, implicitly, “any”—because that’s the
root of Crochet’s hierarchy. When we talk about “any”thing,
then it makes sense that we could possibly be talking about
any of these types.</p>
<p>We can visualise this hierarchy like so:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="o">+</span> any
<span class="p">|</span>
<span class="err">`</span><span class="o">--+</span> being
   <span class="p">|</span>
   <span class="err">`</span><span class="o">--+</span> person
   <span class="p">|</span>  <span class="p">|</span>
   <span class="p">|</span>  <span class="err">`</span><span class="o">--</span>o alissa
   <span class="p">|</span>
   <span class="err">`</span><span class="o">--+</span> cat
      <span class="p">|</span>
      <span class="err">`</span><span class="o">--</span>o caramel
</pre></div>
</div>
<div class="section" id="modelling-possibilities">
<h2>Modelling possibilities<a class="headerlink" href="#modelling-possibilities" title="Permalink to this headline">¶</a></h2>
<p>Hierarchies are used for Dispatch, but they’re also a tool for
reasoning about programs and designing programs in Crochet.
One such design approach is to use types to capture the
possibilities in the little world we’re creating in our
programs.</p>
<p>For example, suppose we’re writing a program that simulates
flipping a coin. We toss the coin up, and when it falls it’s
going to give us some result. We can capture this result as
a possibility:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> coin-result<span class="p">;</span>
</pre></div>
</div>
<p>Now, there are really only two results we can get: when the
coin falls, it’ll land with one or the other side up. These
sides are generally called <code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code>, so we
can model these as discrete possibilities of a coin result:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> head <span class="k">is</span> coin-result<span class="p">;</span>
<span class="k">type</span> tail <span class="k">is</span> coin-result<span class="p">;</span>
</pre></div>
</div>
<p>Of course, there’s still a remote possibility that, if we
were to more accurately capture physics and complex
environments, the coin never lands on either side! In that
case, there’s no real result and we should flip it again.
But it’s still interesting to capture this as a possibility:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> undecided <span class="k">is</span> coin-result<span class="p">;</span>
</pre></div>
</div>
<p>By capturing this as a hierarchy not only do we get to see
what are the things that can happen when we flip a coin, and
talk about the specific results that we may get. It also lets
us talk about results <em>in general</em>.</p>
<div class="section" id="caveats-of-a-static-hierarchy">
<h3>Caveats of a static hierarchy<a class="headerlink" href="#caveats-of-a-static-hierarchy" title="Permalink to this headline">¶</a></h3>
<p>It’s important to note that Crochet admits only one static
hierarchy. This means that the feature is a poor fit for
<em>contextual</em> hierarchies.</p>
<p>For example, if we think about mathematical shapes, then
a <code class="docutils literal notranslate"><span class="pre">square</span></code> would be just a special case of a <code class="docutils literal notranslate"><span class="pre">rectangle</span></code>,
and we may proceed to define the following hierarchy:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> rectangle<span class="p">(</span>width<span class="p">,</span> height<span class="p">)</span> <span class="k">is</span> shape<span class="p">;</span>
<span class="k">type</span> square<span class="p">(</span>side<span class="p">)</span> <span class="k">is</span> rectangle<span class="p">;</span>
</pre></div>
</div>
<p>At first, this might make sense, but we run into cases like the
following:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="nv">A</span> <span class="p">=</span> <span class="k">new</span> rectangle<span class="p">(</span><span class="mf">10</span><span class="p">,</span> <span class="mf">10</span><span class="p">);</span>
<span class="k">let</span> <span class="nv">B</span> <span class="p">=</span> <span class="k">new</span> square<span class="p">(</span><span class="mf">10</span><span class="p">);</span>
</pre></div>
</div>
<p>Now, both <code class="docutils literal notranslate"><span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">B</span></code> are mathematically equivalent shapes—they’re
both squares with sides of length 10. But Crochet’s type system does not
know that a square means “all sides have equal length”, it only knows that
rectangles have a <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> component, and squares, which
are a kind of rectangle, only have a <code class="docutils literal notranslate"><span class="pre">side</span></code> component. Therefore the
type system does not consider <code class="docutils literal notranslate"><span class="pre">A</span></code> to be a square—even though we,
humans, do.</p>
<p>So, as a rule of thumb, it’s better to make subtypes only if they
unconditionally fulfill all of the properties of its parent type.
This is often described as the Liskov substution principle.</p>
</div>
<div class="section" id="caveats-of-an-open-hierarchy">
<h3>Caveats of an open hierarchy<a class="headerlink" href="#caveats-of-an-open-hierarchy" title="Permalink to this headline">¶</a></h3>
<p>It’s important to note as well that hierarchies in Crochet are <strong>open</strong>.
This means that new types may be added to the hierarchy at any point
in time, by anyone.</p>
<p>For example, consider the case where one is modelling an RPG system
where characters may be affected by different conditions. This will
often be defined as an hierarchy, so we can talk about <em>conditions</em>
in general, as well as specific conditions:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="k">condition</span><span class="p">;</span>
<span class="k">type</span> poisoned <span class="k">is</span> <span class="k">condition</span><span class="p">;</span>
<span class="k">type</span> sleeping <span class="k">is</span> <span class="k">condition</span><span class="p">;</span>
<span class="k">type</span> silenced <span class="k">is</span> <span class="k">condition</span><span class="p">;</span>
</pre></div>
</div>
<p>As it stands, the author of the <code class="docutils literal notranslate"><span class="pre">condition</span></code> type has thought of
three different conditions: <code class="docutils literal notranslate"><span class="pre">poisoned</span></code>, <code class="docutils literal notranslate"><span class="pre">sleeping</span></code>, and <code class="docutils literal notranslate"><span class="pre">silenced</span></code>.
It’s quite likely that the code dealing with conditions may end up
baking assumptions about its specific conditions. However, there is
nothing in Crochet that prevents some other piece of code from
attaching more conditions to this hierarchy:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> petrified <span class="k">is</span> <span class="k">condition</span><span class="p">;</span>
</pre></div>
</div>
<p>If such a declaration appears at some later point, somewhere in the
program, then <code class="docutils literal notranslate"><span class="pre">petrified</span></code> will be considered as much as a member
of the <code class="docutils literal notranslate"><span class="pre">condition</span></code> hierarchy as any other. These declarations may,
indeed, happen when the program is executing—through the
Crochet interactive playground.</p>
<p>In order to add new types to the hierarchy, however, an author would
need to have access to the <code class="docutils literal notranslate"><span class="pre">condition</span></code> type. So limiting the visibility
of this type would allow more control over the hierarchy. But the
open and extensible behaviour is often more desirable if you’re
sharing your code with someone else.</p>
</div>
<div class="section" id="caveats-of-field-projection">
<h3>Caveats of field projection<a class="headerlink" href="#caveats-of-field-projection" title="Permalink to this headline">¶</a></h3>
<p>Often programming languages that feature type hierarchies also have
subtypes inherit the fields from the parent type. That is, given
something like:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> rectangle<span class="p">(</span>width<span class="p">,</span> height<span class="p">);</span>
<span class="k">type</span> square<span class="p">(</span>side<span class="p">)</span> <span class="k">is</span> rectangle<span class="p">;</span>
</pre></div>
</div>
<p>Then, in common object-oriented languages, the <code class="docutils literal notranslate"><span class="pre">square</span></code> type would really
define three fields: <code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code>, and <code class="docutils literal notranslate"><span class="pre">side</span></code>. Where the first two
would be inherited from <code class="docutils literal notranslate"><span class="pre">rectangle</span></code>.</p>
<p>Crochet does not work that way. In Crochet, there is no field inheritance.
The layout of a data structure is precisely what is specified in its
declaration. Commands, however, are inherited, and thus it is important
for inherited commands to not use field projection directly.</p>
</div>
</div>
<div class="section" id="testing-classifications">
<h2>Testing classifications<a class="headerlink" href="#testing-classifications" title="Permalink to this headline">¶</a></h2>
<p>Once we have a hierarchy of types, it’s useful to ask the system questions
like “is X a cat?”, where <code class="docutils literal notranslate"><span class="pre">X</span></code> can be any Crochet value. Crochet then
allows the program to behave differently depending on the answer to that
question.</p>
<p>For example, if we were to model a rock-paper-scissors classification:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">abstract</span> move<span class="p">;</span>
<span class="k">singleton</span> rock <span class="k">is</span> move<span class="p">;</span>
<span class="k">singleton</span> paper <span class="k">is</span> move<span class="p">;</span>
<span class="k">singleton</span> scissors <span class="k">is</span> move<span class="p">;</span>
</pre></div>
</div>
<p>Then we could determine the winning move of this game by testing for
this classification:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">condition</span>
  <span class="k">when</span> <span class="p">(</span><span class="nv">A</span> <span class="k">is</span> rock<span class="p">)</span> <span class="k">and</span> <span class="p">(</span><span class="nv">B</span> <span class="k">is</span> scissors<span class="p">)</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">A wins</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">when</span> <span class="p">(</span><span class="nv">A</span> <span class="k">is</span> paper<span class="p">)</span> <span class="k">and</span> <span class="p">(</span><span class="nv">B</span> <span class="k">is</span> rock<span class="p">)</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">A wins</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">when</span> <span class="p">(</span><span class="nv">A</span> <span class="k">is</span> scissors<span class="p">)</span> <span class="k">and</span> <span class="p">(</span><span class="nv">B</span> <span class="k">is</span> paper<span class="p">)</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">A wins</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">when</span> <span class="p">(</span><span class="nv">B</span> <span class="k">is</span> rock<span class="p">)</span> <span class="k">and</span> <span class="p">(</span><span class="nv">A</span> <span class="k">is</span> scissors<span class="p">)</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">B wins</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">when</span> <span class="p">(</span><span class="nv">B</span> <span class="k">is</span> paper<span class="p">)</span> <span class="k">and</span> <span class="p">(</span><span class="nv">A</span> <span class="k">is</span> rock<span class="p">)</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">B wins</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">when</span> <span class="p">(</span><span class="nv">B</span> <span class="k">is</span> scissors<span class="p">)</span> <span class="k">and</span> <span class="p">(</span><span class="nv">A</span> <span class="k">is</span> paper<span class="p">)</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">B wins</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">otherwise</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">It's a draw</span><span class="dl">"</span><span class="p">;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Value</span> <span class="pre">is</span> <span class="pre">type</span></code> expression allows us to ask Crochet questions
about the classification of the value in the type hierarchy we’ve
defined. This will be true whenever the value’s type is the same
as the one we’re asking about, of course. But it’ll be also true if
the type we’re testing is any of the parents of the value’s type.
The value <code class="docutils literal notranslate"><span class="pre">rock</span></code> is of type <code class="docutils literal notranslate"><span class="pre">rock</span></code>, but also of type <code class="docutils literal notranslate"><span class="pre">move</span></code>,
and also of type <code class="docutils literal notranslate"><span class="pre">any</span></code>.</p>
<p>The recommended way of testing for classifications in Crochet, however
is to use commands. We can specify type requirements in commands, and
new commands can be defined at any point later, if these need to be
adapted or extended to a different context. With commands our example
before would look like this:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> move <span class="nf">beats:</span> move <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
<span class="k">command</span> rock <span class="nf">beats:</span> scissors <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="k">command</span> paper <span class="nf">beats:</span> rock <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="k">command</span> scissors <span class="nf">beats:</span> paper <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

<span class="k">command</span> <span class="p">(</span><span class="nv">A</span> <span class="k">is</span> move<span class="p">)</span> <span class="nf">play-against:</span> <span class="p">(</span><span class="nv">B</span> <span class="k">is</span> move<span class="p">)</span> <span class="p">=</span>
  <span class="k">condition</span>
    <span class="k">when</span> <span class="nv">A</span> <span class="nf">beats:</span> <span class="nv">B</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">A wins</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">when</span> <span class="nv">B</span> <span class="nf">beats:</span> <span class="nv">A</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">B wins</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">otherwise</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">It's a draw</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">end</span><span class="p">;</span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">move</span> <span class="pre">beats:</span> <span class="pre">move</span></code>, we’re defining a base line for all moves.
If we don’t know what specific move has been used, then we can’t
truly say which one wins in the game. But we follow that by defining
different commands for each specific type. <code class="docutils literal notranslate"><span class="pre">rock</span> <span class="pre">beats:</span> <span class="pre">scissors</span></code>
captures one of these specific commands, where we override our base
line with a more informed behaviour for this game.</p>
<p>Commands and dispatch are discussed in details in the commands chapter.</p>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="traits.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Traits</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="using.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Using typed data</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Q.
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../../_sources/system/types/hierarchies.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Hierarchies of types</a><ul>
<li><a class="reference internal" href="#modelling-possibilities">Modelling possibilities</a><ul>
<li><a class="reference internal" href="#caveats-of-a-static-hierarchy">Caveats of a static hierarchy</a></li>
<li><a class="reference internal" href="#caveats-of-an-open-hierarchy">Caveats of an open hierarchy</a></li>
<li><a class="reference internal" href="#caveats-of-field-projection">Caveats of field projection</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-classifications">Testing classifications</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/main.js"></script>
    </body>
</html>