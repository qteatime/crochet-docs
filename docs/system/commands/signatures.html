<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Executing commands" href="dispatch.html" /><link rel="prev" title="What are commands?" href="declaration.html" />

    <meta name="generator" content="sphinx-4.1.1, furo 2021.07.05.beta38"/>
        <title>Signatures and their uses - Crochet 0.12 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/crochet.css" />
    


<style>
  :root {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../_static/pygments_dark.css"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Crochet 0.12 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">Crochet 0.12 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">The Crochet System</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../whats-crochet.html">What’s Crochet?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing-crochet.html">Installing Crochet</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../structure/index.html">How is Crochet structured?</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../structure/introduction.html">The Crochet universe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../structure/package-configuration.html">Package configuration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../types/index.html">Data and types</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../types/types-and-data.html">Types and data modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../types/hierarchies.html">Hierarchies of types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../types/traits.html">Traits</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Commands</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="declaration.html">What are commands?</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Signatures and their uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="dispatch.html">Executing commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="why.html">Why are commands …?</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../computing/index.html">Computing with Crochet</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../computing/execution-models.html">Execution models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../computing/bindings.html">Naming values</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../computing/intrinsics/index.html">Intrinsic data types</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/gradual.html">Gradual representations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/numbers.html">Numeric models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/text.html">Textual models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/logic.html">Logical models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/functions.html">Program representations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../computing/intrinsics/collections.html">Collections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../computing/application.html">Applying programs and commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../computing/using.html">Using data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../computing/equality.html">Equality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../computing/branching.html">Branching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../computing/comprehension.html">Working with multiple values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../design-philosophy.html">Annex A: Design philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sociology-and-linguistics.html">Annex B: Sociology and linguistics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="signatures-and-their-uses">
<h1>Signatures and their uses<a class="headerlink" href="#signatures-and-their-uses" title="Permalink to this headline">¶</a></h1>
<p>So a part of a declaration is made out of (at least) a signature and a
behaviour. But what is a signature, really? Signatures are a combination
of the command’s name with the command’s requirements. It let us identify
a specific command, or even talk about and search groups of related commands.</p>
<div class="section" id="command-names">
<h2>Command names<a class="headerlink" href="#command-names" title="Permalink to this headline">¶</a></h2>
<p>In the previous section we’ve seen that command names have an underscore
where requirements and values would go. So, for example, the command
<code class="docutils literal notranslate"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">true</span></code> has the name <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">and</span> <span class="pre">_</span></code>. But Crochet is actually
quite restricted in which ways names can be formed. One can’t just
write something like <code class="docutils literal notranslate"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">true</span> <span class="pre">and</span> <span class="pre">also</span> <span class="pre">true</span></code> and expect Crochet
to understand it as <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">and</span> <span class="pre">_</span> <span class="pre">and</span> <span class="pre">also</span> <span class="pre">_</span></code>.</p>
<p>Crochet has four different “forms” of names:</p>
<ul class="simple">
<li><p><strong>Unary postfix</strong>: these are names like <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">successor</span></code>, <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">round</span></code>, or
<code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">is-empty</span></code>. Note that the name of the command always follows
the underscore, and when a name is composed of multiple words they
are written hyphen-separated, rather than space-separated. As the name
suggests, these commands apply to exactly one value.</p></li>
<li><p><strong>Unary prefix</strong>: the only name in this category is currently
<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">_</span></code>. Like the postfix variation, only one value is accepted.</p></li>
<li><p><strong>Binary</strong>: these are names like <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">+</span> <span class="pre">_</span></code>, <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">and</span> <span class="pre">_</span></code>, or
<code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">&lt;-</span> <span class="pre">_</span></code>. These commands have exactly two requirements and
two values, one on each side of the name. Unlike unary names,
a binary name cannot be anything you come up with—rather,
there are a handful of valid names that Crochet knows about,
and any new name would require a change to the Crochet
language itself.</p></li>
<li><p><strong>Keyword</strong>: these are names like <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">to:</span> <span class="pre">_</span></code>, <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">between:</span> <span class="pre">_</span> <span class="pre">and:</span> <span class="pre">_</span></code>,
<code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">from:</span> <span class="pre">_</span> <span class="pre">fold-with:</span> <span class="pre">_</span></code>. Here the command may have two or more requirements
and values. It always starts with an underscore. And then is followed by
any number of <code class="docutils literal notranslate"><span class="pre">keyword:</span> <span class="pre">_</span></code> suffixes. Like in the unary case, these
keywords can be anything, and multiple words need to be separated with
hyphens instead of spaces. Additionally, a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>) needs to follow
the keyword immediately—no spaces allowed between the hyphenated words
and the colon.</p></li>
<li><p><strong>Self-less keyword</strong>: this is a variation of the <strong>keyword</strong> form where
the name starts with a keyword instead of a requirement/value. For
example, <code class="docutils literal notranslate"><span class="pre">panic-without-trace:</span> <span class="pre">_</span> <span class="pre">tag:</span> <span class="pre">_</span></code> and <code class="docutils literal notranslate"><span class="pre">panic-without-trace:</span> <span class="pre">_</span></code>
are both self-less keyword names. The reason it’s called “self-less” is
that the very first requirement/value in a command is treated in a
slightly special way in Crochet, and can be referenced through the
special expression <code class="docutils literal notranslate"><span class="pre">self</span></code>. A command that does not start with a
requirement/value would make it confusing to highlight any of them,
so there’s no <code class="docutils literal notranslate"><span class="pre">self</span></code> allowed within these commands—they’re <code class="docutils literal notranslate"><span class="pre">self-less</span></code>.</p></li>
</ul>
</div>
<div class="section" id="binary-command-names">
<h2>Binary command names<a class="headerlink" href="#binary-command-names" title="Permalink to this headline">¶</a></h2>
<p>In Crochet, binary commands cannot have arbitrary names—rather, they must
be one of the pre-defined symbol combinations. One of the reasons for this is that
we want to help people read these consistently, both when they’re completely
unfamiliar with the code in question, and when they need to use assistive
technologies to read code. Both of these become much trickier when you
allow arbitrary sequences of symbols to be used for commands.</p>
<p>Crochet does not only prescribe a set of symbolic names, though. It also
prescribes a reading for them, and a meaning for them. This <em>does</em> mean
that commands which stray from the meaning prescribed here should probably
choose a different name to avoid confusing users.</p>
<p>The following names are prescribed:</p>
<div class="section" id="change-operators">
<h3>Change operators<a class="headerlink" href="#change-operators" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Target</span> <span class="pre">&lt;-</span> <span class="pre">Value</span></code> (read as: store <code class="docutils literal notranslate"><span class="pre">Value</span></code> in <code class="docutils literal notranslate"><span class="pre">Target</span></code>)</dt><dd><p>This is used for any container of data that may change over time. The
<code class="docutils literal notranslate"><span class="pre">Value</span></code> indicates how the <code class="docutils literal notranslate"><span class="pre">Target</span></code> will change. <code class="docutils literal notranslate"><span class="pre">Target``s</span> <span class="pre">may</span>
<span class="pre">hold</span> <span class="pre">multiple</span> <span class="pre">values,</span> <span class="pre">however.</span> <span class="pre">And</span> <span class="pre">how</span> <span class="pre">these</span> <span class="pre">values</span> <span class="pre">and</span> <span class="pre">changes</span> <span class="pre">are</span>
<span class="pre">observed</span> <span class="pre">is</span> <span class="pre">entirely</span> <span class="pre">up</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">``Target</span></code> implementation.</p>
</dd>
</dl>
</div>
<div class="section" id="boolean-operators">
<h3>Boolean operators<a class="headerlink" href="#boolean-operators" title="Permalink to this headline">¶</a></h3>
<p>The semantics for these operators should be close to how one would
reason about boolean algebra.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">and</span> <span class="pre">B</span></code> (read as is)</dt><dd><p>This is used for combining two values in a way that produces something
containing aspects of each side.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">or</span> <span class="pre">B</span></code> (read as is)</dt><dd><p>This is used for combining two values in a way that produces something
containing aspects of one of the sides.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">A</span></code> (read as is)</dt><dd><p>This is used for inverting the meaning of a value.</p>
</dd>
</dl>
</div>
<div class="section" id="equality-operators">
<h3>Equality operators<a class="headerlink" href="#equality-operators" title="Permalink to this headline">¶</a></h3>
<p>The semantics of these operators should strictly follow what is
prescribed by the <code class="docutils literal notranslate"><span class="pre">equality</span></code> trait.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">===</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> equals <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>This is used strictly for value equality.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">=/=</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> does not equal <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>This is used strictly for non-equality of values.</p>
</dd>
</dl>
</div>
<div class="section" id="relational-operators">
<h3>Relational operators<a class="headerlink" href="#relational-operators" title="Permalink to this headline">¶</a></h3>
<p>These operators are used strictly for ordering of values. The semantics are
prescribed by the <code class="docutils literal notranslate"><span class="pre">total-ordering</span></code> and <code class="docutils literal notranslate"><span class="pre">partial-ordering</span></code> traits.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> is greater than <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for ordering.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;=</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> is greater or equal to <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for ordering.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> is less than <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for ordering.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;=</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> is less or equal to <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for ordering.</p>
</dd>
</dl>
</div>
<div class="section" id="arithmetic-operators">
<h3>Arithmetic operators<a class="headerlink" href="#arithmetic-operators" title="Permalink to this headline">¶</a></h3>
<p>These operators are used strictly for arithmetic. The semantics are described
by the <code class="docutils literal notranslate"><span class="pre">arithmetic</span></code> trait.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">+</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> plus <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for arithmetic addition.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> minus <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for arithmetic subtraction.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">*</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> times <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for arithmetic multiplication.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">/</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> divided by <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for arithmetic division without rounding.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">%</span> <span class="pre">B</span></code> (read as: the remainder of <code class="docutils literal notranslate"><span class="pre">A</span></code> divided by <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for taking the remainder of a division.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">**</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> to the power of <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>Used for exponentiation.</p>
</dd>
</dl>
</div>
<div class="section" id="concatenation-operators">
<h3>Concatenation operators<a class="headerlink" href="#concatenation-operators" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">++</span> <span class="pre">B</span></code> (read as: <code class="docutils literal notranslate"><span class="pre">A</span></code> followed by <code class="docutils literal notranslate"><span class="pre">B</span></code>)</dt><dd><p>The concatenation operation can be used for anything that can be roughtly
thought of as the juxtaposition of the two values.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>So we’ve discussed names, but what about requirements? Requirements are
what goes into each of those underscores when we’re declaring commands in
Crochet.</p>
<p>In their purest form, a requirement looks like this:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="p">(</span><span class="nv">Left</span> <span class="k">is</span> integer<span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nv">Right</span> <span class="k">is</span> integer<span class="p">)</span> <span class="p">=</span>
  <span class="c1">// behaviour omitted</span>
</pre></div>
</div>
<p>Both <code class="docutils literal notranslate"><span class="pre">Left</span> <span class="pre">is</span> <span class="pre">integer</span></code> and <code class="docutils literal notranslate"><span class="pre">Right</span> <span class="pre">is</span> <span class="pre">integer</span></code> are requirements. You
can read these as they’re written—or in the slightly longer form:
“Left is a value of type integer”—, but what they mean is that whatever
we use at that location must be an instance of the specified type on the
right of <code class="docutils literal notranslate"><span class="pre">is</span></code>—here our type is <code class="docutils literal notranslate"><span class="pre">integer</span></code>. And once we’ve made sure
that the value meets the requirement, we’ll be able to refer to that value
by the name that is on the left of <code class="docutils literal notranslate"><span class="pre">is</span></code>—here it can be <code class="docutils literal notranslate"><span class="pre">Left</span></code> or <code class="docutils literal notranslate"><span class="pre">Right</span></code>.
These names, <code class="docutils literal notranslate"><span class="pre">Left</span></code> and <code class="docutils literal notranslate"><span class="pre">Right</span></code> are called variables, although in
Crochet, unlike some other languages, they are not allowed to change
what they refer to.</p>
<p>For example, if we had an expression like <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span></code>, then <code class="docutils literal notranslate"><span class="pre">Left</span></code> would
refer to <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">Right</span></code> would refer to <code class="docutils literal notranslate"><span class="pre">2</span></code>—because both <code class="docutils literal notranslate"><span class="pre">1</span></code> and
<code class="docutils literal notranslate"><span class="pre">2</span></code> are instances of the integer type, and thus fulfill each side’s
type requirements.</p>
<p>Besides type requirements, Crochet also supports trait requirements:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="p">(</span><span class="nv">Collection</span> <span class="k">is</span> any <span class="k">has</span> countable-container<span class="p">)</span> is-empty <span class="p">=</span>
  <span class="c1">// behaviour omitted</span>
</pre></div>
</div>
<p>In this case you can again read it as it’s written, or use the slightly
longer form: “Collection is a value that is an instance of any type, and
has an implementation of the trait countable-container”. Here, the
requirement is fulfilled if the value we’re using is an instance of the
specified type, and there exists an implementation of the trait
for the any of the types it’s an instance of. So in <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span> <span class="pre">is-empty</span></code>,
we’d be able to refer to the list <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> through the name <code class="docutils literal notranslate"><span class="pre">Collection</span></code>,
because lists implement the trait countable-container.</p>
<div class="section" id="multiple-trait-requirements">
<h3>Multiple trait requirements<a class="headerlink" href="#multiple-trait-requirements" title="Permalink to this headline">¶</a></h3>
<p>A value can have exactly one type, but it can have implementations for
several different traits. So trait requirements allow one to specify
multiple traits, when their combination is necessary.</p>
<p>For example, the collections part of the standard Crochet library relies
heavily on traits for specifying common properties among very different
values—things like sets, lists, and maps can still be handled in a
consistent way if we’re only interested in a specific concept that they
all exhibit, but it wouldn’t really make sense to turn that into a
<em>classification</em> of these types and their relationships.</p>
<p>So, if you look at the standard library, you’re going to see several
commands with requirements that look like this:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span>
  <span class="p">(</span><span class="nv">A</span> <span class="k">has</span> set-algebra<span class="p">,</span> countable-container<span class="p">)</span>
  <span class="nf">is-subset:</span>
  <span class="p">(</span><span class="nv">B</span> <span class="k">has</span> set-algebra<span class="p">,</span> countable-container<span class="p">)</span>
<span class="p">=</span>
  <span class="p">(</span><span class="nv">A</span> <span class="nf">complement:</span> <span class="nv">B</span><span class="p">)</span> is-empty<span class="p">;</span>
</pre></div>
</div>
<p>Here we’re defining the subset relationship from set theory in a
way that reads: “A is a subset of B if, after removing all B elements
from A, we’re left with an empty set—which must mean the B has all
elements that A has, and possibly some more. Note that in order for
this definition to work we rely on being able to take the complement
of two sets—to be able to take one set, and then remove from it all
elements that are found in another set. This operation is available
on any type that implements <code class="docutils literal notranslate"><span class="pre">set-algebra</span></code>. But we also need to be
able to observe if we’re left with something that contains any elements
or not. The <code class="docutils literal notranslate"><span class="pre">is-operation</span></code> is provided for types that implement
the <code class="docutils literal notranslate"><span class="pre">countable-container</span></code> trait.</p>
<p>Trait requirements can specify any number of traits after the <code class="docutils literal notranslate"><span class="pre">has</span></code>
special word, separating all of them with a comma (<code class="docutils literal notranslate"><span class="pre">,</span></code>).</p>
</div>
<div class="section" id="convenience-forms">
<h3>Convenience forms<a class="headerlink" href="#convenience-forms" title="Permalink to this headline">¶</a></h3>
<p>While you can always write requirements in their pure form, it can
be convenient to write it in a shorter form sometimes. For type
requirements we can omit the variables and write just the type
name. With the exception of the special <code class="docutils literal notranslate"><span class="pre">self</span></code> value, this leaves
us with no way of referring to the value used at that location,
but it can still be useful when either the type tells us everything
about the value, or when we don’t need to use anything from the value
in the particular command.</p>
<p>Throughout the standard Crochet library, the <code class="docutils literal notranslate"><span class="pre">self</span></code> requirements
almost always have their variables omitted, and the value is just
referred to by its name within the behaviour. For example:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> integer successor <span class="p">=</span> <span class="k">self</span> <span class="o">+</span> <span class="mf">1</span><span class="p">;</span>
</pre></div>
</div>
<p>This could have just as well been written with an explicit variable,
but here adding a name lengthens the declaration without really
communicating anything new. So the standard library makes the
stylistic choice of omiting redundant information where possible.</p>
<p>We can also omit the type part of the requirement, in which case
the type is treated as <code class="docutils literal notranslate"><span class="pre">any</span></code>—all types are ultimately instances
of the <code class="docutils literal notranslate"><span class="pre">any</span></code> type. Again, being explicit here would be redundant,
as what we want to communicate is that we don’t have any specific
requirement on this value—and omitting the type already tells us
exactly that!</p>
<p>We can see this happening in standard library functions like:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> panic <span class="nf">message:</span> <span class="nv">Message</span> <span class="p">=</span>
  panic <span class="nf">message:</span> <span class="nv">Message</span> <span class="nf">tag:</span> <span class="dl">"</span><span class="s2">panic</span><span class="dl">"</span><span class="p">;</span>
</pre></div>
</div>
<p>It’s a common idiom in commands like the one above, which are
just a convenient way of invoking a different command with some
default pieces filled in. Not having a requirement here means that
the requirements of the real command will be used for all values
we provide here—and it avoids us having to replicate those
requirements and keep them up to date.</p>
<p>For traits, we can also omit the type part—but not the variable part.
Often, for traits, we don’t want to stipulate any requirement other
than an implementation of the trait, so the type requirement is often
just  <code class="docutils literal notranslate"><span class="pre">any</span></code>—again, that’s pretty redundant.</p>
<p>We can see this in standard library functions like:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="p">(</span><span class="nv">X</span> <span class="k">has</span> total-ordering<span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="nv">Y</span> <span class="k">has</span> total-ordering<span class="p">)</span> <span class="p">=</span>
  <span class="p">(</span><span class="nv">X</span> <span class="o">&lt;</span> <span class="nv">Y</span><span class="p">)</span> <span class="k">or</span> <span class="p">(</span><span class="nv">X</span> <span class="o">===</span> <span class="nv">Y</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="a-word-of-caution-ambiguity">
<h3>A word of caution: ambiguity<a class="headerlink" href="#a-word-of-caution-ambiguity" title="Permalink to this headline">¶</a></h3>
<p>Crochet commands can be defined anywhere. By anyone. For any requirements.
But when we put together a program to be loaded by the Crochet VM we need
to make sure that a set of values cannot trigger more than one command.</p>
<p>That is, if we have an expression like <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span></code>, then the program is free
to define as many <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">+</span> <span class="pre">_</span></code> commands as it wishes, but there must be exactly
one of these commands which is the “closest match” for that expression.</p>
<p>Crochet will always tell this when you try to load a program—if you have
an ambiguity, that ambiguity will need to be fixed before you can load the
program.</p>
<p>With type requirements, an ambiguity would mean that you have the same
set of type requirements on multiple commands. That is, if you have:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="k">true</span> <span class="k">and</span> <span class="k">true</span> <span class="p">=</span> <span class="dl">"</span><span class="s2">ok</span><span class="dl">"</span><span class="p">;</span>
<span class="k">command</span> <span class="k">true</span> <span class="k">and</span> <span class="k">true</span> <span class="p">=</span> <span class="dl">"</span><span class="s2">not ok</span><span class="dl">"</span><span class="p">;</span>
</pre></div>
</div>
<p>Crochet will not be able to load this program because it can’t really
know if <code class="docutils literal notranslate"><span class="pre">true</span> <span class="pre">and</span> <span class="pre">true</span></code> should mean <code class="docutils literal notranslate"><span class="pre">"ok"</span></code> or <code class="docutils literal notranslate"><span class="pre">"not</span> <span class="pre">ok"</span></code>.</p>
<p>Trait requirements make this problem a bit trickier. Because any type
can implement any trait—and even multiple traits—Crochet gives
all traits the exact same weight. So if we have two different commands
that only depend on traits, they’re considered ambiguous by Crochet:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="p">(</span><span class="nv">A</span> <span class="k">has</span> countable-container<span class="p">)</span> is-empty <span class="p">=</span> <span class="nv">A</span> count <span class="o">===</span> <span class="mf">0</span><span class="p">;</span>
<span class="k">command</span> <span class="p">(</span><span class="nv">A</span> <span class="k">has</span> collection-constructor<span class="p">,</span> equality<span class="p">)</span> is-empty <span class="p">=</span> <span class="nv">A</span> empty <span class="o">===</span> <span class="nv">A</span><span class="p">;</span>
</pre></div>
</div>
<p>Here both <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">is-empty</span></code> commands depend on distinct traits. The second one
even depends on multiple traits. But when you consider that someone could
write the following implementations:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> set<span class="p">(...);</span>
<span class="k">implement</span> countable-container <span class="k">for</span> set<span class="p">;</span>
<span class="k">implement</span> collection-constructor <span class="k">for</span> set<span class="p">;</span>
<span class="k">implement</span> equality <span class="k">for</span> set<span class="p">;</span>
</pre></div>
</div>
<p>Then any uses of <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">set(...)</span> <span class="pre">is-empty</span></code> could just as well trigger either
of them—there’s no relationship between these traits to dictate which one
should be considered “closer” <em>by the people writing this program</em>. Sure
Crochet could come up with a disambiguation strategy, but it would be arbitrary
and unlikely to map to most users’ expectations. That would mean that using
traits would be even more frustrating than it is now.</p>
</div>
<div class="section" id="irrelevant-variables">
<h3>Irrelevant variables<a class="headerlink" href="#irrelevant-variables" title="Permalink to this headline">¶</a></h3>
<p>Names don’t always make sense in Crochet, but when using traits it’s also
hard to avoid them. For these cases you can use an underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) where
the name would go. This underscore tells Crochet that the name isn’t really
relevant.</p>
<p>The underscore differs a bit from just picking a random name because we’re
allowed to use the underscore in multiple places in the requirement. If we
were to pick a random name, we’d have to pick an unique one for each position
we plan to use it at.</p>
<p>For example, the following would be rejected by Crochet:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="p">(</span><span class="nv">X</span> <span class="k">has</span> countable-collection<span class="p">)</span> <span class="nf">and:</span> <span class="p">(</span><span class="nv">X</span> <span class="k">has</span> countable-collection<span class="p">)</span> <span class="p">=</span> <span class="p">...;</span>
</pre></div>
</div>
<p>That’s because Crochet cannot make <code class="docutils literal notranslate"><span class="pre">X</span></code> refer to two different values at
the same time—that would be very ambiguous. On the other hand, by using
the underscore we give up on our ability of referring to the values, so
this isn’t a problem. Crochet will happilly accept the following:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="p">(</span><span class="nv">_</span> <span class="k">has</span> countable-collection<span class="p">)</span> <span class="nf">and:</span> <span class="p">(</span><span class="nv">_</span> <span class="k">has</span> countable-collection<span class="p">)</span> <span class="p">=</span> <span class="p">...;</span>
</pre></div>
</div>
</div>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="dispatch.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Executing commands</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="declaration.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">What are commands?</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Q.
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../../_sources/system/commands/signatures.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Signatures and their uses</a><ul>
<li><a class="reference internal" href="#command-names">Command names</a></li>
<li><a class="reference internal" href="#binary-command-names">Binary command names</a><ul>
<li><a class="reference internal" href="#change-operators">Change operators</a></li>
<li><a class="reference internal" href="#boolean-operators">Boolean operators</a></li>
<li><a class="reference internal" href="#equality-operators">Equality operators</a></li>
<li><a class="reference internal" href="#relational-operators">Relational operators</a></li>
<li><a class="reference internal" href="#arithmetic-operators">Arithmetic operators</a></li>
<li><a class="reference internal" href="#concatenation-operators">Concatenation operators</a></li>
</ul>
</li>
<li><a class="reference internal" href="#requirements">Requirements</a><ul>
<li><a class="reference internal" href="#multiple-trait-requirements">Multiple trait requirements</a></li>
<li><a class="reference internal" href="#convenience-forms">Convenience forms</a></li>
<li><a class="reference internal" href="#a-word-of-caution-ambiguity">A word of caution: ambiguity</a></li>
<li><a class="reference internal" href="#irrelevant-variables">Irrelevant variables</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/main.js"></script>
    </body>
</html>