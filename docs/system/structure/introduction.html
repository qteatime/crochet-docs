<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Package configuration" href="package-configuration.html" /><link rel="prev" title="How is Crochet structured?" href="index.html" />

    <meta name="generator" content="sphinx-4.1.1, furo 2021.07.05.beta38"/>
        <title>The Crochet universe - Crochet 0.12 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/crochet.css" />
    


<style>
  :root {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../_static/pygments_dark.css"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Crochet 0.12 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">Crochet 0.12 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">The Crochet System</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../whats-crochet.html">What’s Crochet?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing-crochet.html">Installing Crochet</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">How is Crochet structured?</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">The Crochet universe</a></li>
<li class="toctree-l3"><a class="reference internal" href="package-configuration.html">Package configuration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../types/index.html">Data and types</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../types/types-and-data.html">Types and data modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../types/using.html">Using typed data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../types/hierarchies.html">Hierarchies of types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../types/traits.html">Traits</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../commands/index.html">Commands</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../commands/declaration.html">What are commands?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/signatures.html">Signatures and their uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/dispatch.html">Executing commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/why.html">Why are commands …?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../design-philosophy.html">Annex A: Design philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sociology-and-linguistics.html">Annex B: Sociology and linguistics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="the-crochet-universe">
<h1>The Crochet universe<a class="headerlink" href="#the-crochet-universe" title="Permalink to this headline">¶</a></h1>
<p>What are Crochet programs made out of? Well, many things, it turns out.
First, Crochet programs are organised into packages. These packages will
then dictate what other packages they need in order to work, as well as
how much it trusts each of these packages. And packages will also contain
modules—this is where we start getting deeper into “code”.</p>
<p>Modules are a collection of “code entities”. They may contain types,
definitions, commands, tests, as well as several other less common things:
relations, capabilities, actions, events, patches, and so on.</p>
<p>An application written in Crochet will usually be made out of several
different packages—which in turn will have several modules, containing
several code entities. But there isn’t really a technical distinction
between “package” and “application” in Crochet. An application _is_ a
package. The “root” package, to be more precise. It’s from there that
Crochet decides what to load, and how much “power” each of the loaded
packages should have.</p>
<p>If this sounds confusing, don’t worry. We’ll see this in more details,
and with more examples.</p>
<div class="section" id="packages">
<h2>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h2>
<p>A package is the highest level of organisation in Crochet. A package
can be your application, but more often than not, a package is a
component—like a matching block—which you can combine with other
packages to build bigger things.</p>
<p>They exist as a directory in your computer’s file system, and must
contain at least one file called <code class="docutils literal notranslate"><span class="pre">crochet.json</span></code>. This file is what
tells Crochet what the package is all about. But a package will also
contain other files: modules, documentation, images, etc. The <code class="docutils literal notranslate"><span class="pre">crochet.json</span></code>
file aside, these can be organised freely inside of the directory—conventions
exist, but they’re just conventions.</p>
<div class="section" id="crochet-json">
<h3><code class="docutils literal notranslate"><span class="pre">crochet.json</span></code><a class="headerlink" href="#crochet-json" title="Permalink to this headline">¶</a></h3>
<p>So what’s this <code class="docutils literal notranslate"><span class="pre">crochet.json</span></code> file anyway? It’s a <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a>
file that describes what the package is, what it uses, and what it contains.
We call it, more colloquially, the <a class="reference internal" href="package-configuration.html#package-configuration"><span class="std std-ref">Package Configuration</span></a>.</p>
<p>The package configuration also tells Crochet where to find the things a package
contains, as again Crochet doesn’t force items to be organised in any particular way.</p>
<p>This file might look like the following:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"my-package"</span><span class="p">,</span>
  <span class="nt">"description"</span><span class="p">:</span> <span class="s2">"A really cute package for Crochet"</span><span class="p">,</span>
  <span class="nt">"target"</span><span class="p">:</span> <span class="s2">"browser"</span><span class="p">,</span>
  <span class="nt">"dependencies"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"crochet.core"</span>
  <span class="p">],</span>
  <span class="nt">"sources"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"my-module.crochet"</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>So this tells us that we have a package called <code class="docutils literal notranslate"><span class="pre">my-package</span></code>. It only works
in the web browser. It uses another package called <code class="docutils literal notranslate"><span class="pre">crochet.core</span></code> (which
is distributed with Crochet). And it contains a single module, which can
be found in the file <code class="docutils literal notranslate"><span class="pre">my-module.crochet</span></code>, in the same folder as the JSON
file.</p>
<p>We go into more details on what exactly all of these properties—like <code class="docutils literal notranslate"><span class="pre">"name"</span></code>
or <code class="docutils literal notranslate"><span class="pre">"target"</span></code>—in the JSON file mean, and how one would go about reading
and writing these files in the <a class="reference internal" href="package-configuration.html#package-configuration"><span class="std std-ref">Package Configuration</span></a> section.</p>
</div>
<div class="section" id="directory-structure-convention">
<h3>Directory structure convention<a class="headerlink" href="#directory-structure-convention" title="Permalink to this headline">¶</a></h3>
<p>Crochet isn’t picky at all about how you decide to structure your files—you
will be describing that in your package configuration. However, there is a
convention for organising them. By following the convention, you can make
the life of people who’re using your package easier, if they want to
learn from it or modify it.</p>
<p>So packages generally look like the following (directories are described with
a <code class="docutils literal notranslate"><span class="pre">/</span></code> (forward slash) after their name):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>o my-package/                      (this is the package directory)
|
|---o crochet.json                 (the package configuration)
|---o source/                      (modules will be placed here)
|   |
|   `---o my-module.crochet
|
|---o native/                      (native modules will be placed here)
|---o test/                        (additional tests will be placed here)
`---o assets/                      (images, sounds, etc. will go here)
</pre></div>
</div>
</div>
</div>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<p>So packages will contain modules. But what in the world are modules anyway?
Well, they are files that tell Crochet what <em>code</em> makes up the package.
Things are a bit trickier here than in other programming systems you may
be familiar with because Crochet is a “language-driven” system. What this
means is that modules may (and <em>will</em>) be written in different programming
languages.</p>
<p>For example, our <code class="docutils literal notranslate"><span class="pre">my-module.crochet</span></code> file from before could look like
the following:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> crochet

<span class="k">define</span> greeting <span class="p">=</span> <span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span><span class="p">;</span>

<span class="k">command</span> <span class="nf">greet:</span> <span class="nv">Person</span> <span class="p">=</span> <span class="dl">"</span><span class="si">[</span>greeting<span class="si">]</span><span class="s2">, </span><span class="si">[</span><span class="nv">Person</span><span class="si">]</span><span class="s2">!</span><span class="dl">"</span><span class="p">;</span>
</pre></div>
</div>
<p>This module provides two code entities: the definition <code class="docutils literal notranslate"><span class="pre">greeting</span></code>, and
the command <code class="docutils literal notranslate"><span class="pre">greet:</span> <span class="pre">Person</span></code>. Don’t worry about what these mean for now.
We’ll see all of this in more details later. The important thing to note
here is that modules are, essentially, a collection of these “code entities”.
So the code that a package contains will be all of these modules’ code entities
combined.</p>
<p>But modules are not aways these <code class="docutils literal notranslate"><span class="pre">.crochet</span></code> files—because Crochet is
language-driven, modules can be written in many different languages, and not
just the Crochet language. For example, the following <code class="docutils literal notranslate"><span class="pre">arithmetic.lingua</span></code>
is also a module, ready to be included in a package and loaded as code:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> lingua

<span class="k">type</span> <span class="nv">Arithmetic</span> <span class="p">=</span>
  <span class="p">|</span> <span class="nv">Addition</span><span class="p">(</span><span class="nf">left:</span> <span class="nv">Arithmetic</span><span class="p">,</span> <span class="nf">right:</span> <span class="nv">Arithmetic</span><span class="p">)</span>
  <span class="p">|</span> <span class="nv">Subtraction</span><span class="p">(</span><span class="nf">left:</span> <span class="nv">Arithmetic</span><span class="p">,</span> <span class="nf">right:</span> <span class="nv">Arithmetic</span><span class="p">)</span>
  <span class="p">|</span> <span class="nv">Number</span><span class="p">(</span><span class="nf">value:</span> <span class="nv">Text</span><span class="p">)</span>

grammar <span class="nv">Arithmetic</span> <span class="p">:</span> <span class="nv">Arithmetic</span> <span class="p">{</span>
  <span class="nv">Expression</span> <span class="p">=</span>
    <span class="p">|</span> <span class="nf">left:</span><span class="nv">Expression</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="nf">right:</span><span class="nv">Expression</span>  <span class="o">-&gt;</span> <span class="nv">Arithmetic</span><span class="p">.</span><span class="nv">Addition</span><span class="p">(</span>left<span class="p">,</span> right<span class="p">)</span>
    <span class="p">|</span> <span class="nf">left:</span><span class="nv">Expression</span> <span class="dl">"</span><span class="s2">-</span><span class="dl">"</span> <span class="nf">right:</span><span class="nv">Expression</span>  <span class="o">-&gt;</span> <span class="nv">Arithmetic</span><span class="p">.</span><span class="nv">Subtraction</span><span class="p">(</span>left<span class="p">,</span> right<span class="p">)</span>
    <span class="p">|</span> <span class="nf">value:</span>number                          <span class="o">-&gt;</span> <span class="nv">Arithmetic</span><span class="p">.</span><span class="nv">Number</span><span class="p">(</span>value<span class="p">)</span>

  token number <span class="p">=</span> digit<span class="o">+</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It looks nothing like our <code class="docutils literal notranslate"><span class="pre">my-module.crochet</span></code> because it’s written in the
Lingua language, rather than the Crochet language. But the Crochet <em>system</em>
is able to load this code just as well as the Crochet one. The idea in Crochet
is that each module is written in the language that makes the most sense
for the task it’s solving—and the Crochet system will make sure they
can all be combined into a single package (and application), by automatically
translating between the new language (like Lingua) and the Crochet language.</p>
</div>
<div class="section" id="code-entities">
<h2>Code entities<a class="headerlink" href="#code-entities" title="Permalink to this headline">¶</a></h2>
<p>So modules are a collection of these “code entities”. But what exactly are
“code entities” anyway? They’re specific concepts that the Crochet knows
how to interpret in order to make the computer behave in particular ways.
They provide definitions and rules that direct computers, in a sense.</p>
<p>Collectively, these entities make up the “code” portion of a package, and
they are further divided into many types of entities.</p>
<div class="section" id="types">
<h3>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3>
<p>A type tells Crochet how to classify and structure some piece of information.
They also play a key role in Crochet’s security and privacy guarantees. Here,
a type is an unique, unforgeable name that has some structure associated with
it.</p>
<p>For example:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> rectangle<span class="p">(</span>width<span class="p">,</span> height<span class="p">);</span>
</pre></div>
</div>
<p>This type has the name <code class="docutils literal notranslate"><span class="pre">rectangle</span></code>, and contains two pieces of information:
the <code class="docutils literal notranslate"><span class="pre">width</span></code> of the rectangle, and the <code class="docutils literal notranslate"><span class="pre">height</span></code> of the rectangle. These
pieces are also called Fields. We discuss types and their usage in more details
in the <a class="reference internal" href="../types/index.html#data-and-types"><span class="std std-ref">Data and Types</span></a> chapter.</p>
<p>But how are names unique? And what exactly does it mean for names to be
“unforgeable”? We discuss these in details, and what exactly these properties
mean for Crochet’s security guarantees, in the Security chapter.</p>
</div>
<div class="section" id="commands">
<h3>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h3>
<p>A command tells Crochet how to compute—how to instruct the computer to
do something. Not only that, but commands are the <em>only</em> way to instruct
the computer to do something. Nothing happens in Crochet if not by the
execution of a command—and this has some important security and usability
implications that we’ll discuss in the Interactive Programming chapter.</p>
<p>Commands look like this:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="p">(</span><span class="nv">X</span> <span class="k">is</span> rectangle<span class="p">)</span> area <span class="p">=</span> <span class="nv">X</span><span class="p">.</span>width <span class="o">*</span> <span class="nv">X</span><span class="p">.</span>height<span class="p">;</span>
</pre></div>
</div>
<p>This can be read as: “understand the area of a rectangle (we’ll call it X),
as the width of X times the height of X.” It describes a rule to Crochet, and
this rule tells Crochet how the area of a rectangle is computed.</p>
<p>The name of this command is not really <code class="docutils literal notranslate"><span class="pre">area</span></code> though, but rather <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">area</span></code>.
The underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) is used by convention to show where the arguments for
that command should go. In the body of this command, <code class="docutils literal notranslate"><span class="pre">*</span></code> is just another
command! More specifically, the <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">*</span> <span class="pre">_</span></code> command. Notice how <code class="docutils literal notranslate"><span class="pre">X.width</span></code> and
<code class="docutils literal notranslate"><span class="pre">X.height</span></code> both fill the underscore spaces—the way you define a command
is very similar to the way you use it.</p>
<p>Unlike types, multiple commands with the same name can exist in Crochet, as
long as they apply to different types—in the example above, the <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">rectangle</span></code>
part is what tells us what types the command applies to. So we could have, in
the same module or elsewhere, something like:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">command</span> <span class="p">(</span><span class="nv">X</span> <span class="k">is</span> circle<span class="p">)</span> area <span class="p">=</span> <span class="p">(</span><span class="nv">X</span><span class="p">.</span>radius <span class="o">**</span> <span class="mf">2</span><span class="p">)</span> <span class="o">*</span> pi<span class="p">;</span>
</pre></div>
</div>
<p>Because Crochet knows what type is associated with each piece of information,
whenever we ask “hey, what’s the <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">area</span></code> of this thing?”, Crochet will know
exactly which command needs to be executed, even though multiple rules for
<code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">area</span></code> exist.</p>
<p>We discuss commands and their usage in more details in the <a class="reference internal" href="../commands/index.html#commands"><span class="std std-ref">Commands</span></a>
chapter.</p>
</div>
<div class="section" id="traits">
<h3>Traits<a class="headerlink" href="#traits" title="Permalink to this headline">¶</a></h3>
<p>If a type classifies one piece of information, then a trait identifies common
aspects of many types. This commonality is, in Crochet, mostly captured by
commands that can be performed on different types.</p>
<p>For example, rectangles and circles are different kinds of shapes.
But they both have a concept of an <code class="docutils literal notranslate"><span class="pre">area</span></code>. This commonality can
be captured with a trait:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">trait</span> has-area <span class="k">with</span>
  <span class="k">command</span> <span class="nv">X</span> area<span class="p">;</span>
<span class="k">end</span>

<span class="k">type</span> rectangle<span class="p">(</span>width<span class="p">,</span> height<span class="p">);</span>
<span class="k">type</span> circle<span class="p">(</span>radius<span class="p">);</span>

<span class="k">implement</span> has-area <span class="k">for</span> rectangle<span class="p">;</span>
<span class="k">command</span> <span class="p">(</span><span class="nv">X</span> <span class="k">is</span> rectangle<span class="p">)</span> area <span class="p">=</span> <span class="nv">X</span><span class="p">.</span>width <span class="o">*</span> <span class="nv">X</span><span class="p">.</span>height<span class="p">;</span>

<span class="k">implement</span> has-area <span class="k">for</span> circle<span class="p">;</span>
<span class="k">command</span> <span class="p">(</span><span class="nv">X</span> <span class="k">is</span> circle<span class="p">)</span> area <span class="p">=</span> <span class="p">(</span><span class="nv">X</span><span class="p">.</span>radius <span class="o">**</span> <span class="mf">2</span><span class="p">)</span> <span class="o">*</span> pi<span class="p">;</span>
</pre></div>
</div>
<p>Here we define a trait called <code class="docutils literal notranslate"><span class="pre">has-area</span></code>, and the requirement for it is
that the type must understand a <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">area</span></code> command. But just defining an
<code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">area</span></code> command isn’t sufficient—we also need to be explicit about
wanting the type to belong to this trait. That’s what we’re doing with
the <code class="docutils literal notranslate"><span class="pre">implement</span> <span class="pre">has-area</span> <span class="pre">for</span> <span class="pre">...</span></code> entities.</p>
<p>Why be explicit about it, though? Isn’t it obvious that rectangle and
circle have an area? Well, it might seem so because we’re the ones defining
it. But when we’re dealing with other packages—which might not even be
aware of traits we’ve conjured!—, it’s easy to get into situations where
types fulfill all of the requirements from a trait, but the commands don’t
really <em>behave</em> as we expected.</p>
<p>If someone defines a type <code class="docutils literal notranslate"><span class="pre">game-map</span></code>, and gives it an <code class="docutils literal notranslate"><span class="pre">_</span> <span class="pre">area</span></code> command
that provides the current area the player character is in, should <code class="docutils literal notranslate"><span class="pre">game-map</span></code>
really belong to our <code class="docutils literal notranslate"><span class="pre">has-area</span></code> classification for geometric shapes? Quite
unlikely.</p>
<p>We discuss more about traits, including how and when to use them, in the
<a class="reference internal" href="../types/index.html#data-and-types"><span class="std std-ref">Data and Types</span></a> chapter.</p>
</div>
<div class="section" id="effects">
<h3>Effects<a class="headerlink" href="#effects" title="Permalink to this headline">¶</a></h3>
<p>Many programming systems try to make it easier to show things on the screen
or interact with files. After all, what good is a program if you can’t see
what it’s doing? Surely a program is only as good as the effects it has?</p>
<p>Well, Crochet takes a different approach. By default, no programs can show
things on the screen, interact with files, or, really, do anything that someone
would be able to observe. And there’s a very good reason for this: all of these
things have a big impact on the security guarantees we can provide, and they
can have very disastrous results: imagine writing a program to delete files
and only realising you’d deleted the wrong one after it’s gone!</p>
<p>So, in Crochet, one describes what they expect the system to do—e.g.: showing
things on screen, or deleting files. But how these things are carried out is
decided later, and can very well be replaced. For example:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">effect</span> display <span class="k">with</span>
  show<span class="p">(</span>text<span class="p">);</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Here we tell Crochet that we have some intention of showing text on the screen,
and later we can ask Crochet to do so by performing this: <code class="docutils literal notranslate"><span class="pre">perform</span> <span class="pre">display.show("Hello")</span></code>.
But <em>how</em> Crochet actually goes about performing it is defined elsewhere.</p>
<p>Effects are certainly one of the more difficult parts of Crochet. And so they
get their own chapter, which explains, in depth, why they’re important, how
they’re used, and why they are the way they are.</p>
</div>
<div class="section" id="capability-groups">
<h3>Capability groups<a class="headerlink" href="#capability-groups" title="Permalink to this headline">¶</a></h3>
<p>Capabilities are how Crochet is able to guarantee that programs can be safe
even if you add code from the internet to it. They also allow one to reason
about a program—and then decide whether you trust it or not.</p>
<p>A capability group is an entity that describes some kind of power—or
capability. For example, we might think that deleting files is a dangerous
thing. What someone sends you a Crochet package, telling you they’d love
if you could help beta-testing their new game; and then you run it, and
it deletes all of your personal photos. That wouldn’t be cool.</p>
<p>If, instead, we have a capability for deleting files, then Crochet would
tell you beforehand: “Hey, this game you’re running can actually delete
your files. Do you want to run it anyway?”.</p>
<p>For example:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">capability</span> delete-files<span class="p">;</span>
<span class="k">type</span> file-system<span class="p">;</span>
<span class="k">protect</span> file-system <span class="k">with</span> delete-files<span class="p">;</span>
</pre></div>
</div>
<p>Here we do three things: tell Crochet that “deleting files” is a thing, and
is a very dangerous thing. We then introduce a <code class="docutils literal notranslate"><span class="pre">file-system</span></code> type, and tell
Crochet that by using <code class="docutils literal notranslate"><span class="pre">file-system</span></code> one would be able to delete files. This
way Crochet can accurately track these dangers and only show you <em>relevant</em>
ones.</p>
<p>Of course, it’s not just because something can do dangerous things that it is
inherently evil—but we discuss what exactly it means, and what goes into
deciding whether to trust some application or not in the Security chapter.</p>
</div>
<div class="section" id="tests">
<h3>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h3>
<p>Tests are an important part of developing any software. Crochet supports
tests as just any other code entity, and provides tools for running them.</p>
<p>They look like this:</p>
<div class="highlight-crochet notranslate"><div class="highlight"><pre><span></span><span class="k">test</span> <span class="dl">"</span><span class="s2">Addition</span><span class="dl">"</span> <span class="k">do</span>
  <span class="k">assert</span> <span class="p">(</span><span class="mf">0</span> <span class="o">+</span> <span class="mf">1</span><span class="p">)</span> <span class="o">===</span> <span class="mf">1</span><span class="p">;</span>
  <span class="k">assert</span> <span class="p">(</span><span class="mf">1</span> <span class="o">+</span> <span class="mf">0</span><span class="p">)</span> <span class="o">===</span> <span class="mf">1</span><span class="p">;</span>
  <span class="k">assert</span> <span class="p">(</span><span class="mf">2</span> <span class="o">+</span> <span class="mf">3</span><span class="p">)</span> <span class="o">===</span> <span class="mf">5</span><span class="p">;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>We discuss testing and Crochet’s support for tests in the Testing chapter.</p>
</div>
</div>
<div class="section" id="native-modules">
<h2>Native modules<a class="headerlink" href="#native-modules" title="Permalink to this headline">¶</a></h2>
<p>So, the Crochet system only speaks the Crochet language natively. Sadly,
the Crochet language is very limited. For example, it doesn’t even have any
concept of arithmetic addition! Let alone a concept of drawing things on
a screen.</p>
<p>How exactly do Crochet applications get to do anything? That is, if
I can write <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">+</span> <span class="pre">3</span></code> in Crochet and get <code class="docutils literal notranslate"><span class="pre">5</span></code> as a response, how exactly
does Crochet know what to do there, if it doesn’t know what an arithmetic
addition is?</p>
<p>Well, someone needs to teach Crochet what to do in these cases. These missing
concepts are often added to Crochet by using a different language—a language
that the computer speaks natively. That’s the role of a Native Module. Instead
of being restricted by what Crochet can do, they are restricted by what the
native language can do. Most native modules in Crochet are written in
<a class="reference external" href="https://en.wikipedia.org/wiki/JavaScript">JavaScript</a>.</p>
<p>Because native modules aren’t restricted by Crochet’s rules and limitations,
they are <em>very powerful</em>. And all of this power is dangerous. In order to
make Crochet safe for everyone, the use of native modules is carefully
controlled through Capabilities.</p>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="package-configuration.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Package configuration</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">How is Crochet structured?</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Q.
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../../_sources/system/structure/introduction.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">The Crochet universe</a><ul>
<li><a class="reference internal" href="#packages">Packages</a><ul>
<li><a class="reference internal" href="#crochet-json"><code class="docutils literal notranslate"><span class="pre">crochet.json</span></code></a></li>
<li><a class="reference internal" href="#directory-structure-convention">Directory structure convention</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modules">Modules</a></li>
<li><a class="reference internal" href="#code-entities">Code entities</a><ul>
<li><a class="reference internal" href="#types">Types</a></li>
<li><a class="reference internal" href="#commands">Commands</a></li>
<li><a class="reference internal" href="#traits">Traits</a></li>
<li><a class="reference internal" href="#effects">Effects</a></li>
<li><a class="reference internal" href="#capability-groups">Capability groups</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
<li><a class="reference internal" href="#native-modules">Native modules</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/main.js"></script>
    </body>
</html>